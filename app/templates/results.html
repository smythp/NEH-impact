{% extends "base.html" %}
{% block content %}

<style>
  h6, p {
    text-align: left;
    padding: 0 15px;

  }
 .six.columns.card h6  {
   padding: 0 15px;
   text-align: left;
   }
</style>


<h2>Results</h2>

<p><button id="view_overview" style="margin-right:10px">View Overview</button> {{ results_count }} results returned. </p>
<div id="overview_panel" style="display:none;margin-left:5%;width: 200px">

  <p>
    <!-- <div class="legend headline">Legend</div> -->
    {% for division in divisions %}
    <div class="legend {{ division.class }}">{{ division.name }}: {{ division.count }} results</div>
    {% endfor %}
  </p>
</div>

{% if grants %}
{% else %}
<p class="left-align">No results found for that zip code.</p>
{% endif %}

{% for grant in grants|sort(reverse=True, attribute='YearAwarded') %}


{{ loop.cycle('<div class="row">', '') | safe }}
  <div class="six columns card">
    <a href="grant/{{ grant.id }}"><h6 class="division {{ grant.division_reclassification }}">{{ grant.ProjectTitle  | truncate(32) }}</h6></a>

    <strong><p>{{ grant.Institution }}<br>
      {{ grant.InstCity }}, {{grant.InstState }}&nbsp; &nbsp;|&nbsp;&nbsp; {{ grant.YearAwarded }}</p></strong>
    
    {% if grant.ProjectDesc %}
    <p class="left-align">{{ grant.ProjectDesc | truncate(600) }}</p>
    {% else %}
    <p>{{ grant.ToSupport | truncate(600) }}</p>
    {% endif %}
  </div>
  {{ loop.cycle('', '</div>') | safe }}
  {% endfor %}

<script>
 $("#view_overview").click(function(){
     $("#overview_panel").toggle("slow");
 });

</script>

  
{% endblock %}
